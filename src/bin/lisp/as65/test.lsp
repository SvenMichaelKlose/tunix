(message "# Testing as65/.")
(load 'as65/opcode.lsp)
(load 'as65/parse.lsp)

(or (equal (as65/parse '(label:))
           '(nil (label . label)))
    (error))
(or (equal (as65/parse '(label :))
           '(nil (label . label)))
    (error))
(or (equal (as65/parse '(lda # 0))
           '(nil (mnem . lda) (mode . imm) (op . 0)))
    (error))
(or (equal (as65/parse '(lda 1234,x))
           '(nil (ireg . x) (op . 1234) (mode . abs) (mnem . lda)))
    (error))
(or (equal (as65/parse '(lda (1234),y))
           '(nil (ireg . y) (op . 1234) (mode . ind) (mnem . lda)))
    (error))
(or (equal (as65/parse '(lda (1234,x)))
           '(nil (mnem . lda) (mode . izpx) (op . 1234)))
    (error))
(message "# as65/parse: Tests passed.")

;(print (as65/asm '(lda # 1) t))
;(message "# as65/asm: Tests passed.")
