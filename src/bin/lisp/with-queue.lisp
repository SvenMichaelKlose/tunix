(macro with-queue (q . body)
  $(with ,(@ '((x)
                $(,x (make-queue)))
             (ensure-list q))
     ,@body))
