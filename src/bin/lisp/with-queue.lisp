(or (cons? ensure-list)
    (load "ensure-list.lisp"))
(or (cons? make-queue)
    (load "queue.lisp"))

(macro with-queue (q . body)
  $(with ,(@ '((x)
                $(,x (make-queue)))
             (ensure-list q))
     ,@body))
